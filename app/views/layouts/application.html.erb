<!DOCTYPE html>
<html>
<head>
  <title><%= full_title yield :title %></title>
  <%= csrf_meta_tags %>
  <%= stylesheet_link_tag "application", media: "all",
    "data-turbolinks-track": "reload" %>
  <%= javascript_include_tag "application", "data-turbolinks-track": "reload" %>
</head>

<body class="body-user">
  <%= render "layouts/header" %>
  <div class="container">
    <% flash.each do |message_type, message| %>
      <div class="alert alert-<%= message_type %>"><%= message %></div>
    <% end %>
    <% if user_signed_in? %>
      <br>
      <div class="row">
        <div class="col-xs-3 left-content">
          <div class="row text-center">
            <% if @user.nil? %>
              <%= link_to image_tag(current_user.avatar, alt: current_user.name,
                size: Settings.size_avatar), user_path(current_user) %>
              <br>
              <h3><%= link_to current_user.name, user_path(current_user) %></h3>
            <% else %>
              <%= link_to image_tag(@user.avatar, alt: @user.name,
                size: Settings.size_avatar), user_path(@user) %>
              <br>
              <h3><%= link_to @user.name, user_path(@user) %></h3>
              <p class="text-center">
                <b>
                  <%= t "home.join_date",
                    time: @user.created_at.to_date.strftime(Settings.time_format) %>
                </b><br>
              </p>
            <% end %>
          </div>
        </div>

        <div class="col-xs-9 right-content">
          <%= yield %>
        </div>
      </div>
    <% end %>
  </div>
</body>
</html>
